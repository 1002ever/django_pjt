{% extends 'base.html' %}

{% block body %}
  <ul>
    <li>ì‘ì„±ì : {{review.user}} </li>
    <li>ì˜í™” : {{review.movie.title}}</li>
    <li>ì œëª© : {{review.title}} </li>
    <li>ë‚´ìš© : {{review.content}} </li>

    <!-- ë¡œê·¸ì¸ í•œ ì‚¬ëŒë§Œ ì¢‹ì•„ìš” ë³´ì´ê²Œ -->
    {% if user != review.user %}
      {% if user in review.like_users.all %}
        <a href="{% url 'articles:like' review.pk %}">ğŸ’–ì¢‹ì•„ìš” ì·¨ì†Œ</a>
      {% else %}
        <a href="{% url 'articles:like' review.pk %}">ğŸ¤ì¢‹ì•„ìš”</a>
      {% endif %}
    {% endif %}

    <li>ì¢‹ì•„ìš” í´ë¦­ ìˆ˜ : {{review.like_users.all.count}}</li>
  </ul>

  {% if review.user == request.user %}
    <form action="{% url 'articles:update' review.pk %}">
      <button>ìˆ˜ì •</button>
    </form>

    <form action="{% url 'articles:delete' review.pk %}" method="POST">
      {% csrf_token %}
      <button>ì‚­ì œ</button>
    </form>
  {% endif %}
  <hr/>

  <form action="{% url 'articles:comment_create' review.pk %}" method="POST">
    {% csrf_token %}
    {{ form }}
    <button>ëŒ“ê¸€ ì‘ì„±</button>
    <hr/>
  </form>

  {% for comment in review.comment_set.all %}
    <span>{{comment.user}}</span>
    <span>{{comment.content}}</span>
    {% if comment.user == request.user %}
      <form action="{% url 'articles:comment_delete' review.pk comment.pk %}" method="POST">
        {% csrf_token %}
        <button>ì‚­ì œ</button>
      </form>
    {% endif %}
    <br/>
  {% endfor %}
{% endblock %}